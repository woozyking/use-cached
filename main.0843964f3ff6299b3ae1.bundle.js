(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{278:function(module,exports,__webpack_require__){__webpack_require__(279),__webpack_require__(444),module.exports=__webpack_require__(445)},352:function(module,exports){},445:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){__webpack_require__(37),__webpack_require__(22),__webpack_require__(18),__webpack_require__(38),__webpack_require__(29);var _storybook_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(116),req=__webpack_require__(634);Object(_storybook_react__WEBPACK_IMPORTED_MODULE_5__.configure)((function loadStories(){req.keys().forEach((function(filename){return req(filename)}))}),module)}.call(this,__webpack_require__(216)(module))},634:function(module,exports,__webpack_require__){var map={"./index.stories.js":635};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=634},635:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){__webpack_require__(52);var react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1),react__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__),_storybook_react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(116),_src__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(85);function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(arr)))return;var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var withSourceLoader=__webpack_require__(277).withSource,__STORY__=(__webpack_require__(277).addSource,"import React, { useState, useReducer } from 'react'\n\nimport { storiesOf } from '@storybook/react'\n\nimport cached from '../src'\n\nconst init = () => Math.floor(Math.random() * 10)\n\nstoriesOf('cached', module)\n  .add('with useState', () => {\n    const StateCounter = () => {\n      // count here would be from cache if it exists as a non-null value\n      const [count, setCount] = cached({\n        key: 'USE_CACHED_USE_STATE_STORY',\n        ttl: 60,\n      })(useState)(init())\n      return (\n        <>\n          Count: {count}\n          <button onClick={() => setCount(init())}>Randomize</button>\n          <button onClick={() => setCount(prevCount => prevCount + 1)}>+</button>\n          <button onClick={() => setCount(prevCount => prevCount - 1)}>-</button>\n        </>\n      )\n    }\n    return (<StateCounter />)\n  }, { options: { showPanel: true, panelPosition: 'bottom' } })\n  .add('with useReducer', () => {\n    const ReducerCounter = () => {\n      const initialCount = Math.floor(Math.random() * 10)\n\n      function init(initialCount) {\n        return { count: initialCount }\n      }\n\n      function reducer(state, action) {\n        switch (action.type) {\n          case 'increment':\n            return { count: state.count + 1 }\n          case 'decrement':\n            return { count: state.count - 1 }\n          case 'reset':\n            return init(action.payload)\n          default:\n            throw new Error()\n        }\n      }\n\n      // state here would be from cache if it exists as a non-null value\n      const [state, dispatch] = cached({\n        key: 'USE_CACHED_USE_REDUCER_STORY',\n        ttl: 60,\n      })(useReducer)(reducer, initialCount, init)\n      return (\n        <>\n          Count: {state.count}\n          <button\n            onClick={() => dispatch({ type: 'reset', payload: initialCount })}>\n            Randomize\n          </button>\n          <button onClick={() => dispatch({ type: 'increment' })}>+</button>\n          <button onClick={() => dispatch({ type: 'decrement' })}>-</button>\n        </>\n      )\n    }\n    return (<ReducerCounter />)\n  }, { options: { showPanel: true, panelPosition: 'bottom' } })\n  .add('programmtic cache removal', () => {\n    const StateCounter = () => {\n      const init = () => Math.floor(Math.random() * 10)\n      // count here would be from cache if it exists as a non-null value\n      const [count, setCount, remove] = cached({\n        key: 'USE_CACHED_USE_STATE_REMOVE_STORY',\n        ttl: 60,\n      })(useState)(init())\n      return (\n        <>\n          Count: {count}\n          <button onClick={() => setCount(init())}>Randomize</button>\n          <button onClick={() => setCount(prevCount => prevCount + 1)}>+</button>\n          <button onClick={() => setCount(prevCount => prevCount - 1)}>-</button>\n          <button onClick={() => remove()}>Cache Removal (current state intact until refresh)</button>\n        </>\n      )\n    }\n    return (<StateCounter />)\n  })\n  .add('No key, no cache', () => {\n    const StateCounter = () => {\n      const init = () => Math.floor(Math.random() * 10)\n      // count here would be not be cached and remove is a no-op function\n      const [count, setCount, remove] = cached()(useState)(init())\n      return (\n        <>\n          Count: {count}\n          <button onClick={() => setCount(init())}>Randomize</button>\n          <button onClick={() => setCount(prevCount => prevCount + 1)}>+</button>\n          <button onClick={() => setCount(prevCount => prevCount - 1)}>-</button>\n          <button onClick={() => remove()}>Cache Removal (no-op without key)</button>\n        </>\n      )\n    }\n    return (<StateCounter />)\n  })\n"),__ADDS_MAP__={"cached--no-key-no-cache":{startLoc:{col:7,line:88},endLoc:{col:3,line:104},startBody:{col:27,line:88},endBody:{col:3,line:104}},"cached--programmtic-cache-removal":{startLoc:{col:7,line:68},endLoc:{col:3,line:87},startBody:{col:36,line:68},endBody:{col:3,line:87}},"cached--with-usereducer":{startLoc:{col:7,line:28},endLoc:{col:62,line:67},startBody:{col:26,line:28},endBody:{col:3,line:67}},"cached--with-usestate":{startLoc:{col:7,line:10},endLoc:{col:62,line:27},startBody:{col:24,line:10},endBody:{col:3,line:27}}},init=function(){return Math.floor(10*Math.random())};Object(_storybook_react__WEBPACK_IMPORTED_MODULE_2__.storiesOf)("cached",module).addParameters({storySource:{source:__STORY__,locationsMap:__ADDS_MAP__}}).addDecorator(withSourceLoader(__STORY__,__ADDS_MAP__,"/index.stories.js",[],{},"/home/runner/work/use-cached/use-cached/stories",{})).add("with useState",(function(){return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement((function StateCounter(){var _cached2=_slicedToArray(Object(_src__WEBPACK_IMPORTED_MODULE_3__.a)({key:"USE_CACHED_USE_STATE_STORY",ttl:60})(react__WEBPACK_IMPORTED_MODULE_1__.useState)(init()),2),count=_cached2[0],setCount=_cached2[1];return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment,null,"Count: ",count,react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("button",{onClick:function onClick(){return setCount(init())}},"Randomize"),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("button",{onClick:function onClick(){return setCount((function(prevCount){return prevCount+1}))}},"+"),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("button",{onClick:function onClick(){return setCount((function(prevCount){return prevCount-1}))}},"-"))}),null)}),{options:{showPanel:!0,panelPosition:"bottom"}}).add("with useReducer",(function(){return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement((function ReducerCounter(){var initialCount=Math.floor(10*Math.random());function init(initialCount){return{count:initialCount}}var _cached4=_slicedToArray(Object(_src__WEBPACK_IMPORTED_MODULE_3__.a)({key:"USE_CACHED_USE_REDUCER_STORY",ttl:60})(react__WEBPACK_IMPORTED_MODULE_1__.useReducer)((function(state,action){switch(action.type){case"increment":return{count:state.count+1};case"decrement":return{count:state.count-1};case"reset":return init(action.payload);default:throw new Error}}),initialCount,init),2),state=_cached4[0],dispatch=_cached4[1];return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment,null,"Count: ",state.count,react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("button",{onClick:function onClick(){return dispatch({type:"reset",payload:initialCount})}},"Randomize"),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("button",{onClick:function onClick(){return dispatch({type:"increment"})}},"+"),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("button",{onClick:function onClick(){return dispatch({type:"decrement"})}},"-"))}),null)}),{options:{showPanel:!0,panelPosition:"bottom"}}).add("programmtic cache removal",(function(){return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement((function StateCounter(){var init=function(){return Math.floor(10*Math.random())},_cached6=_slicedToArray(Object(_src__WEBPACK_IMPORTED_MODULE_3__.a)({key:"USE_CACHED_USE_STATE_REMOVE_STORY",ttl:60})(react__WEBPACK_IMPORTED_MODULE_1__.useState)(init()),3),count=_cached6[0],setCount=_cached6[1],remove=_cached6[2];return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment,null,"Count: ",count,react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("button",{onClick:function onClick(){return setCount(init())}},"Randomize"),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("button",{onClick:function onClick(){return setCount((function(prevCount){return prevCount+1}))}},"+"),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("button",{onClick:function onClick(){return setCount((function(prevCount){return prevCount-1}))}},"-"),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("button",{onClick:function onClick(){return remove()}},"Cache Removal (current state intact until refresh)"))}),null)})).add("No key, no cache",(function(){return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement((function StateCounter(){var init=function(){return Math.floor(10*Math.random())},_cached8=_slicedToArray(Object(_src__WEBPACK_IMPORTED_MODULE_3__.a)()(react__WEBPACK_IMPORTED_MODULE_1__.useState)(init()),3),count=_cached8[0],setCount=_cached8[1],remove=_cached8[2];return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment,null,"Count: ",count,react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("button",{onClick:function onClick(){return setCount(init())}},"Randomize"),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("button",{onClick:function onClick(){return setCount((function(prevCount){return prevCount+1}))}},"+"),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("button",{onClick:function onClick(){return setCount((function(prevCount){return prevCount-1}))}},"-"),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("button",{onClick:function onClick(){return remove()}},"Cache Removal (no-op without key)"))}),null)}))}.call(this,__webpack_require__(216)(module))},85:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__(27),__webpack_require__(34),__webpack_require__(35),__webpack_require__(19),__webpack_require__(238),__webpack_require__(22),__webpack_require__(18),__webpack_require__(638),__webpack_require__(640),__webpack_require__(243),__webpack_require__(39),__webpack_require__(29);var react__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(1),lscache__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(86),lscache__WEBPACK_IMPORTED_MODULE_13___default=__webpack_require__.n(lscache__WEBPACK_IMPORTED_MODULE_13__);function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(arr)))return;var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||_unsupportedIterableToArray(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(iter))return Array.from(iter)}(arr)||_unsupportedIterableToArray(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}var SUPPORTED_HOOKS=[react__WEBPACK_IMPORTED_MODULE_12__.useState,react__WEBPACK_IMPORTED_MODULE_12__.useReducer];__webpack_exports__.a=function cached(){for(var key,ttl,ttlMS,_len=arguments.length,params=Array(_len),_key=0;_key<_len;_key++)params[_key]=arguments[_key];if("object"===_typeof(params[0])&&null!==params[0]){var _params$=params[0],_params$$key=_params$.key;key=void 0===_params$$key?null:_params$$key;var _params$$ttl=_params$.ttl;ttl=void 0===_params$$ttl?null:_params$$ttl;var _params$$ttlMS=_params$.ttlMS;ttlMS=void 0===_params$$ttlMS?null:_params$$ttlMS}else{var _params$2=params[0];key=void 0===_params$2?null:_params$2;var _params$3=params[1];ttl=void 0===_params$3?null:_params$3;var _params$4=params[2];ttlMS=void 0===_params$4?null:_params$4}if(null===key)return function(hook){return function(){return[].concat(_toConsumableArray(hook.apply(void 0,arguments)),[function(){}])}};if(!isNaN(parseInt(ttlMS))&&0<ttlMS&&lscache__WEBPACK_IMPORTED_MODULE_13___default.a.setExpiryMilliseconds(ttlMS),!key||"string"!=typeof key)throw new Error("key must be a non-empty string.");if(null!==ttl&&(isNaN(parseFloat(ttl))||0>ttl))throw new Error("ttl can only be null or a positive number.");return function(hook){if("function"!=typeof hook||!SUPPORTED_HOOKS.includes(hook))throw new Error("Only useState and useReducer can be cached");return function(){var state,method,cachedState=lscache__WEBPACK_IMPORTED_MODULE_13___default.a.get(key);if(null===cachedState){var _hook=hook.apply(void 0,arguments),_hook2=_slicedToArray(_hook,2);state=_hook2[0],method=_hook2[1]}else if(hook===react__WEBPACK_IMPORTED_MODULE_12__.useState){var _hook3=hook(cachedState),_hook4=_slicedToArray(_hook3,2);state=_hook4[0],method=_hook4[1]}else{var _hook5=hook(0>=arguments.length?void 0:arguments[0],cachedState),_hook6=_slicedToArray(_hook5,2);state=_hook6[0],method=_hook6[1]}return Object(react__WEBPACK_IMPORTED_MODULE_12__.useEffect)((function(){lscache__WEBPACK_IMPORTED_MODULE_13___default.a.set(key,state,ttl)}),[state,key,ttl]),[state,method,function(){return lscache__WEBPACK_IMPORTED_MODULE_13___default.a.remove(key)}]}}}}},[[278,1,2]]]);
//# sourceMappingURL=main.0843964f3ff6299b3ae1.bundle.js.map